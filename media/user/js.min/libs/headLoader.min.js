/**
 * @link : https://github.com/baiyukey/headLoader
 * @version : 2.5.8
 * @update : 2025-07-06 00:44:06
 * @copyright : http://www.uielf.cn
 */
function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var l=t[r](o),i=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}}const headLoaderSource=function(){const e="null"===window.location.origin||window.location.origin===window.top.location.origin?window.top:window,t=document.head,n=e=>Object.prototype.toString.call(e).slice(8,-1);if(!e.Promise)return e.onload=function(){document.body.innerHTML='<div style="text-align:center"><ul style="display:inline-block;margin-top:20px;text-align:left;list-style:none;line-height:32px;"><li style="list-style:none;"><h3>抱歉，您的浏览器不支持运行当前页面！</h3>如下两种方法供您参考：</li><li>✱ 请将您的浏览器切换到 "极速内核" (如果有)。</li><li>✱ <a href="https://www.google.cn/chrome/">或者下载安装 "chrome" 浏览器后重试。</a></li></ul></div>'};const a=e.XMLHttpRequest,r=/^(((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)|(127.0.0.1))$/.test(e.location.hostname)?"":".min",o={0:"网络连接失败。",404:"该资源找不到了。",500:"无权访问。",503:"该请求已被阻止。"},l=function(e,t){if(""===r)return Date.now();let n=new Date("2000/1/1").getTime();return n+1e3*Math.ceil((Date.now()-1e3*(t||0)*60*60-n)/(36e5*e))*60*60*e+1e3*(t||0)*60*60},i=e=>e.replace(/^.*\.(\w*)[?#]*.*$/,"$1");let s=new function(){let e="";for(let t=48;t<=122;t++)t>=58&&t<=64||t>=91&&t<=96||(e+=String.fromCharCode(t));let t=(e=(e=e.replace(/[aeiouAEIOU01]/g,"")).slice(0,18)+"$-_+!*"+e.slice(18)).length,n=location.host.length,a=-1,r="",o="";this.encode=function(l){r=encodeURIComponent(l).replace(/\./g,"&dot"),o="",a=-1;for(let l=0;l<r.length;l++)a=e.indexOf(r.charAt(l)),o+=a<0?r.charAt(l):e.charAt((a+n)%t);return o}},c=function(t){let a={database:"localDB",tables:{data:["key","value","version"]},version:0,lifeCycle:0,cycleDelay:0};Object.assign(a,t),"Array"===n(t.lifeCycle)&&(a.lifeCycle=t.lifeCycle[0],a.cycleDelay=t.lifeCycle[1]),a.version=l(a.lifeCycle,a.cycleDelay);e.localDBResult=e.localDBResult||null,e.localDBStatus=e.localDBStatus||0;const o=function(t){return void 0!==e.waitCloseLocalDB&&clearTimeout(e.waitCloseLocalDB),new Promise((t,n)=>{if(null!==e.localDBResult&&1===e.localDBStatus)return void t("success");let r=e.indexedDB.open(a.database);r.onerror=function(e){n(e)},r.onsuccess=function(n){e.localDBResult=r.result,e.localDBStatus=1,t(n)},r.onupgradeneeded=function(n){e.localDBResult=n.target.result,e.localDBStatus=1;let r=Object.keys(a.tables);for(const t of r)if(!e.localDBResult.objectStoreNames.contains(t)){let n=e.localDBResult.createObjectStore(t,{keyPath:"key"});a.tables[t].forEach(e=>n.createIndex(e,["key"],{unique:!0}))}n.target.transaction.oncomplete=(()=>t(e.localDBResult))}})},i=function(t=100){return new Promise((n,a)=>{void 0!==e.waitCloseLocalDB&&clearTimeout(e.waitCloseLocalDB);e.waitCloseLocalDB=setTimeout(()=>{(()=>{if(e.localDBResult)if(1===e.localDBStatus)try{e.localDBResult.close(),e.localDBStatus=0,0===t&&(e.localDBResult=null),n("已强制关闭")}catch(e){console.error("强制关闭数据库失败:",e),a(e)}else 0===e.localDBStatus&&n("数据库已经是关闭状态");else n("数据库不存在。")})()},t)})},c=function(){return new Promise(function(t,n){void 0!==e.waitDeleteDB&&clearTimeout(e.waitDeleteDB);let r=0;const o=function(){if(++r>10)return null===e.localDBResult?(console.log("数据库不存在或已删除。"),t("数据库不存在或已删除。")):(console.error("删除数据库失败，已达到最大重试次数 10"),n("删除数据库失败，已达到最大重试次数 10"));r>1&&console.warn(`${200*r/1e3}秒后尝试第${r}次删除操作（共10次）。`),console.log("正在关闭数据库..."),i(10===r?0:200*r).then(e=>{console.log("关闭数据库成功！");const n=indexedDB.deleteDatabase(a.database);n.onsuccess=(()=>{console.log("删除数据库成功！"),t("删除数据库成功")}),n.onerror=(e=>{console.error(`删除数据库出错:'${e.target.error}...`),o()}),n.onblocked=(()=>{console.error("删除数据库被阻塞，等待其他连接关闭..."),o()})}).catch(e=>{console.error("数据库关闭失败，等待其他连接完成..."),o()})};e.waitDeleteDB=setTimeout(o,100)})},u=function(){let t={tableName:"data",key:"",value:null,etag:""};return"object"==typeof arguments[0]?Object.assign(t,arguments[0]):(t.key=arguments[0]||t.key,t.value=arguments[1]||t.value,t.tableName=arguments[2]||t.tableName),new Promise((n=_asyncToGenerator(function*(n,l){let c={key:".min"===r?s.encode(t.key):t.key,value:t.value,etag:t.etag,version:a.version},u="add";if(yield f(t.key).then(function(e){u=e?"put":"add"}).catch(function(e){u="add"}),!e.localDBResult)return n(!1),!1;yield o();let d=e.localDBResult.transaction(t.tableName,"readwrite").objectStore(t.tableName)[u](c);var y;d.onsuccess=_asyncToGenerator(function*(){n(c),yield i()}),d.onerror=(y=_asyncToGenerator(function*(e){l(e.target.error),yield i()}),function(e){return y.apply(this,arguments)})}),function(e,t){return n.apply(this,arguments)}));var n},f=function(t,n){return new Promise((a=_asyncToGenerator(function*(a,l){let c={},u=(d=_asyncToGenerator(function*(){yield o();let u=n||"data",d=e.localDBResult.transaction(u,"readonly").objectStore(u),f=".min"===r?s.encode(t):t,y=d.index("key").get([f]);var h,p;y.onsuccess=(h=_asyncToGenerator(function*(e){(c=e.target.result)&&Object.assign(c,{key:t}),a(c),yield i()}),function(e){return h.apply(this,arguments)}),y.onerror=(p=_asyncToGenerator(function*(e){l(e),yield i()}),function(e){return p.apply(this,arguments)})}),function(){return d.apply(this,arguments)});var d;if(c=L.temp[t])return a(c),!0;yield u()}),function(e,t){return a.apply(this,arguments)}));var a},y=(h=_asyncToGenerator(function*(e){let t=yield f(e);return!!t&&(!!t.version&&(!(Date.now()>t.version)&&t.value))}),function(e){return h.apply(this,arguments)});var h;const p=(m=_asyncToGenerator(function*(e){let t=yield f(e);return t?t.version:0}),function(e){return m.apply(this,arguments)});var m;const g=(b=_asyncToGenerator(function*(e,t){let n=d(e,"css");return yield f(L.getUrl(n,"css"),t||"data")}),function(e,t){return b.apply(this,arguments)});var b;const v=(w=_asyncToGenerator(function*(e,t){let n=d(e,"html");return yield f(L.getUrl(n,"html"),t||"data")}),function(e,t){return w.apply(this,arguments)});var w;const D=(C=_asyncToGenerator(function*(e,t){let n=d(e,"js");return yield f(L.getUrl(n,"js"),t||"data")}),function(e,t){return C.apply(this,arguments)});var C;const T=(j=_asyncToGenerator(function*(e){let t=yield f(e);return!!t&&((e,t)=>{let n=[],a=new Uint8Array(e);for(let e=0;e<a.byteLength;e++)n.push(String.fromCharCode(a[e]));return`data:image/${t};base64,${window.btoa(n.join(""))}`})(t.value,(e=>{let t=e.replace(/^.*\.(\w*)[?#]*.*$/,"$1");return e!==t&&t})(e)||"jpeg")}),function(e){return j.apply(this,arguments)});var j;(function(){return!!(e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB)||(console&&console.log("您的浏览器不支持indexedDB，请使用现代浏览器，例如chrome,firefox等."),!1)})&&(this.open=o,this.close=i,this.delete=c,this.setItem=u,this.getItem=f,this.setValue=u,this.getValue=y,this.getEndTime=p,this.getCss=g,this.getHtml=v,this.getJs=D,this.getBase64=T,this.temp={});let L=this};e.localDB=c;let u,d=(e,t)=>e&&t?e.replace(/^(\s*)|(\s*)$/g,"").replace(`(.${t})`,""):e&&!t?e.replace(/^(\s*)|(\s*)$/g,"").replace(`(.${i(e)}`,""):e,f=function(s){let u=void 0!==s?s:{};this.isLocal=""===r,this.dataDir=u.dataDir||"",this.dataCss=u.dataCss||[],this.dataJs=u.dataJs||[],this.dataFont=u.dataFont||[],this.dataFile=u.dataFile||[],this.lifeCycle="object"==typeof u.lifeCycle?u.lifeCycle[0]:u.lifeCycle||24,this.cycleDelay="object"==typeof u.lifeCycle?u.lifeCycle[1]:u.cycleDelay||0,this.dataActive=u.dataActive||b,this.callback=u.callback||null,this.multiLoad=u.multiLoad||".min"===r,this.showLog=u.showLog||!1,this.preload=void 0!==u.preload?u.preload:0;let f=function(e,t){t.length>0&&t.forEach(function(t){e.setAttribute(t.split("=")[0],t.split("=")[1])})};void 0===e.headLoaderCache&&(e.headLoaderCache={});let y=function(e,t,n){return O.dataActive&&["js","css"].includes(t)?`${O.dataDir}${t}${r}/${e.split("|")[0]}`.replace("."+(n||t),"")+r+"."+(n||t):e},h=function(e,t){return["js","css"].includes(t)?(O.dataDir+t+r+"/"+e.split("|")[0]).replace("."+t,"")+r+"."+t:e},p=function(e,t){return new Promise((r,o)=>{if(!e)return r(2);Number(e.version)<Number(O.requestVersion)?""===e.etag?r(2):(n=t,new Promise((e,t)=>{let r=new a;r.open("HEAD",n,!0),r.send(),r.onreadystatechange=function(){4===Number(r.readyState)&&200===Number(r.status)&&e(r.getResponseHeader("etag")||r.getResponseHeader("last-modified")||"")},r.onerror=(e=>t(e))})).then(t=>{e.etag===t?r(1):r(2)}).catch(e=>o(e)):r(0)});var n},m=(g=_asyncToGenerator(function*(e,t){return new Promise(function(n,r){if((e=>/^http[s]?:\/\//.test(e))(e))return"js"===t?S(e):"css"===t&&A(e),n("success");let l=y(e,t)+(e.indexOf("?")>=0?"&v=":"?v=")+O.requestVersion,s=h(e,t),c=(u=_asyncToGenerator(function*(e,t){let c={};if(Object.assign(c,{key:s,value:t?t.value:"",etag:t?t.etag:"",version:t?t.version:O.requestVersion,exception:!!t&&t.exception}),0===e)O.db.temp[s]=c,n("success");else if(1===e)O.db.temp[s]=c,n("success"),c.version=O.requestVersion,yield O.db.setItem(c);else if(2===e){let e=i(c.key),t=["js","ts","css","svg","text","xml","json","html","htm"].includes(e)?"text":"arraybuffer",u=function(e){c.version=0,c.value="",c.exception={code:e,detail:`Error-${e} ! ${o[e]||""}`},O.db.temp[s]=c,n(`${c.key} 返回 ${c.exception.detail}`)};if(window.fetch){let e=yield fetch(l).catch(function(e){return u("TypeError"===e.name?0:e.name)});if(e.ok){let a="arraybuffer"===t?yield e.arrayBuffer():yield e.text();Object.assign(c,{value:a,etag:e.headers.get("etag")||e.headers.get("last-modified")||"",version:O.requestVersion,exception:!1}),O.db.temp[s]=c,n("success"),yield O.db.setItem(c)}else u(e.status)}else{let e=new a;e.open("GET",l),e.responseType=t,e.send(),e.onreadystatechange=_asyncToGenerator(function*(){if(4!==Number(e.readyState))return!1;if(O.showLog&&D++,200===Number(e.status)){let a=e["arraybuffer"===t?"response":"responseText"];Object.assign(c,{value:a,etag:e.getResponseHeader("etag")||e.getResponseHeader("last-modified")||"",version:O.requestVersion,exception:!1}),O.db.temp[s]=c,n("success"),yield O.db.setItem(c)}else u(e.status),e.abort()}),e.onerror=function(t){e.abort(),r(t)}}}}),function(e,t){return u.apply(this,arguments)});var u;O.db.getItem(s).then(function(e){p(e,l).then(function(t){return c(t,e)}).catch(function(e){return console.error(e)})})})}),function(e,t){return g.apply(this,arguments)});var g;let v=function(e){if(""!==r)return Function(Object.values(e).join(";"))(),!0;let n=document.createElement("script"),a=1===Object.keys(e).length?Object.keys(e)[0]:"_js"+O.requestVersion;a=a.split("|")[0].replace(/(\.css)|(\.min)/g,""),n.setAttribute("type","text/javascript"),n.setAttribute("data-name",a),n.innerHTML=Object.values(e).join(";"),t.appendChild(n)},w=function(e){let n,a=1===Object.keys(e).length?Object.keys(e)[0]:"_css"+O.requestVersion;if(a=a.split("|")[0].replace(/(\.css)|(\.min)/g,""),""!==r&&null!==(n=t.querySelector(`[data-name=${a}]`)))return n.innerHTML+=Object.values(e).join(" "),!1;(n=document.createElement("style")).setAttribute("type","text/css"),n.setAttribute("data-name",a),n.innerHTML=Object.values(e).join(" "),t.appendChild(n)},T=(j=_asyncToGenerator(function*(e){Object.keys(e).forEach(function(t){document.fonts.add(new FontFace(t.replace(/^.*\/|\..*$/g,""),e[t]))})}),function(e){return j.apply(this,arguments)});var j;let S=function(e){if(!document.head)return!1;let n=document.createElement("script");f(n,e.split("|").splice(1)),n.src=0===e.indexOf("http")?e.split("|")[0]:e.split("|")[0].replace(".js","")+r+".js?v="+O.requestVersion,t.appendChild(n)},A=function(e){if(!document.head)return!1;let n=document.createElement("link");f(n,e.split("|").splice(1)),n.type="text/css",n.rel="stylesheet",n.media="screen",n.href=0===e.indexOf("http")?e.split("|")[0]:e.split("|")[0].replace(".css","")+r+".css?v="+O.requestVersion,t.appendChild(n)},B=(x=_asyncToGenerator(function*(e,t){return new Promise(function(n,a){let r,o={JS:v,CSS:w,FONT:T}[t.toUpperCase()],l={},i=[];e.forEach(function(e){l[e]="";i.push(new Promise(function(n,a){r=h(e,t);let o=O.db.temp[r]?O.db.temp[r]:"";l[e]=o.value,O.returnData.push({key:e,value:o.value||"",version:o.version,etag:o.etag,exception:o.exception||!1}),n("success")}))}),Promise.all(i).then(function(){return 1===O.preload?(n("success"),!1):o?(o(l),void n("success")):n("页面写入仅支持js、css、font")}).catch(function(e){return a(e)})})}),function(e,t){return x.apply(this,arguments)});var x;let _=function(e,t){return e&&0!==e.length?new Promise(O.multiLoad?function(e,t){return n=_asyncToGenerator(function*(n){let a=new Array(e.length).fill(0).map(function(n,a){return new Promise((r=_asyncToGenerator(function*(n){yield m(e[a],t),n("success")}),function(e){return r.apply(this,arguments)}));var r});var r;Promise.all(a).then((r=_asyncToGenerator(function*(a){yield B(e,t),n("success")}),function(e){return r.apply(this,arguments)}))}),function(e){return n.apply(this,arguments)};var n}(e,t):function(e,t){return n=_asyncToGenerator(function*(n){let a=0,r=(o=_asyncToGenerator(function*(){if(a>=e.length)return!0;yield m(e[a],t),yield B([e[a]],t),yield r(a++)}),function(){return o.apply(this,arguments)});var o;yield r(),n("success")}),function(e){return n.apply(this,arguments)};var n}(e,t)):new Promise(e=>e("success"))};var F,G,k,$;this.returnData={},this.run=_asyncToGenerator(function*(){return"Array"===n(this.lifeCycle)&&(O.cycleDelay=this.lifeCycle[1],O.lifeCycle=this.lifeCycle[0]),O.requestVersion=l(O.lifeCycle,O.cycleDelay),O.db=new c({lifeCycle:O.lifeCycle,cycleDelay:O.cycleDelay}),this.db.temp={},this.db.getUrl=y,this.returnData={},O.returnData=[],O.dataCss=O.dataCss.map(function(e){return d("_css"===e?L:e,"css")}),O.dataCss=Array.from(new Set(O.dataCss)),O.dataJs=O.dataJs.map(function(e){return d("_js"===e?L:e,"js")}),O.dataJs=Array.from(new Set(O.dataJs)),O.dataFont=O.dataFont.map(function(e){return d(e,"")}),O.dataFont=Array.from(new Set(O.dataFont)),O.dataFile=O.dataFile.map(function(e){return d(e,"")}),O.dataFile=Array.from(new Set(O.dataFile)),yield _(O.dataCss,"css"),yield _(O.dataFont,"font"),yield _(O.dataJs,"js"),yield _(O.dataFile,""),O.showLog&&function(){let t=Date.now()-C;e.headLoaderHistory=void 0!==e.headLoaderHistory?e.headLoaderHistory:[],void 0!==e.showLogTimeout&&clearTimeout(e.showLogTimeout),e.showLogTimeout=setTimeout(()=>{D>0&&(e.headLoaderHistory=e.headLoaderHistory.concat(new Array(D-1).fill(0),t));let n=0,a=0;e.headLoaderHistory.length>0&&(n=e.headLoaderHistory.reduce((e,t)=>e+t),a=Math.ceil(n/e.headLoaderHistory.length)),console.log("当前页面使用headLoader"+(O.multiLoad?"并行":"串行")+"网络请求%c"+D+"个%cJS/CSS文件，程序用时%c"+t+"毫秒%c，累计网络请求%c"+e.headLoaderHistory.length+"个%cJS/CSS文件，单文件平均用时%c"+a+"毫秒","color:#1b8884","","color:#1b8884","","color:#1b8884","","color:#1b8884","")},3e3)}(),"function"==typeof O.callback&&O.callback.call(O,O.returnData),0!==O.returnData.length&&(1===O.returnData.length?O.returnData[0]:O.returnData)}),this.loadFile=(F=_asyncToGenerator(function*(e,t){return O.dataCss=[],O.dataJS=[],O.dataFont=[],O.dataFile=[e].flat(),O.preload=1,yield O.run()}),function(e,t){return F.apply(this,arguments)}),this.loadJs=(G=_asyncToGenerator(function*(e){return O.dataCss=[],O.dataJs=[e].flat(),O.dataFont=[],O.dataFile=[],O.preload=1,yield O.run()}),function(e){return G.apply(this,arguments)}),this.loadCss=(k=_asyncToGenerator(function*(e){return O.dataCss=[e].flat(),O.dataJS=[],O.dataFont=[],O.dataFile=[],O.preload=1,yield O.run()}),function(e){return k.apply(this,arguments)}),this.loadFont=($=_asyncToGenerator(function*(e){return O.dataCss=[],O.dataJS=[],O.dataFont=[e].flat(),O.dataFile=[],O.preload=1,yield O.run()}),function(e){return $.apply(this,arguments)}),this.nextLife=function(e,t){let a,r;return"Array"===n(O.lifeCycle)?(a=O.lifeCycle[0],r=O.lifeCycle[1]):"Number"===n(O.lifeCycle)&&(a=e||O.lifeCycle,r=t||O.cycleDelay),new Date(l(a,r)).toLocaleString()};let O=this};e.headLoader=f,e.hLoader=f;let y,h=[],p=[],m=[],g=[],b=!1,v=24,w=0,D=1,C=Date.now();u=document.currentScript;let T=console.log&&".min"!==r,j=!1,L=(window===window.top?location.pathname:window.frameElement.getAttribute("src")||window.frameElement.pathname||"/404.html").replace(/^(.*\/)(.*)(\.html)([?]*)(.*)$/,"$1$2$4$5");"/"===L.substr(-1)&&(L+="index"),L=0===L.indexOf("/")?L.substr(1):L,u.hasAttribute("data-active")?b=["true",""].includes(u.getAttribute("data-active")):T&&console.log('%c友情提示:script标签未设置"data-active"属性,默认为false.',"color:#69F;"),u.hasAttribute("data-lifecycle")&&(v=Number(u.getAttribute("data-lifecycle"))),u.hasAttribute("data-cycledelay")?w=Number(u.getAttribute("data-cycledelay")):T&&console.log('%c友情提示:script标签未设置"data-lifeCycle"属性,默认为0(开发环境)或24小时(线上环境）.',"color:#69F;"),u.hasAttribute("data-dir")?y=u.getAttribute("data-dir"):T&&console.log('%c友情提示:script标签未设置"data-dir"属性.',"color:#69F;"),u.hasAttribute("data-css")?p=u.getAttribute("data-css").split(","):T&&console.log('%c友情提示:script标签未设置"data-css"属性',"color:#69F;"),u.hasAttribute("data-js")?h=u.getAttribute("data-js").split(","):T&&console.log('%c友情提示:script标签未设置"data-js"属性',"color:#69F;"),u.hasAttribute("data-font")&&(m=u.getAttribute("data-font").split(",")),u.hasAttribute("data-file")&&(g=u.getAttribute("data-file").split(",")),u.hasAttribute("data-showlog")&&(j=["true",""].includes(u.getAttribute("data-showlog"))),""!==r&&u.remove();const S=(A=_asyncToGenerator(function*(){let e=u.src.replace(/.+\.js\?v=(.*)/,"$1");if(e&&".min"===r){let t=new f;t.lifeCycle=876e3,yield t.run();try{if((yield t.db.getValue("srcSearch"))!==e){console.log("检测到新版本，准备清除旧缓存...");try{yield t.db.delete(),console.log("成功删除旧数据库"),yield t.db.setValue("srcSearch",e),localStorage.clear()}catch(e){console.warn("删除数据库时出错:",e.message)}}}catch(e){console.error("版本检查出错:",e)}}}),function(){return A.apply(this,arguments)});var A;const B=(x=_asyncToGenerator(function*(){if(!document.head)return!1;let e=new f;e.lifeCycle=v,e.cycleDelay=w,y&&(e.dataDir=y),p.length>0&&(e.dataCss=p),h.length>0&&(e.dataJs=h),m.length>0&&(e.dataFont=m),g.length>0&&(e.dataFile=g),e.showLog=j,yield e.run()}),function(){return x.apply(this,arguments)});var x;S().then(B)};headLoaderSource(),getHeaderLoader=(e=>`function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var s=t[r](o),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){a("next",e)},function(e){a("throw",e)});e(i)}("next")})}} const headLoaderSource=${headLoaderSource};headLoaderSource()`);
